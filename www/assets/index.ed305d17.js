import{d as T,r as l,ay as m,c as L,f as E,q as i,t as I,y as P,k as d,x as Y,S as _,R as S,a4 as j,a5 as x,z as O,M as C,l as $}from"./ant-design-vue.27440fdb.js";import{H as M,_ as B,r as N}from"./index.da4ff793.js";import{c as R}from"./index.e1ede277.js";import{u as U}from"./useI18n.25a437e0.js";function V(e={}){return M("/admin/baseInfo/workingDaySettings","GET",e)}function W(e){return M("/admin/baseInfo/workingDaySettings/"+e,"DELETE")}function q(e={}){return M("/admin/baseInfo/workingDaySettings","POST",e)}const{t:g}=U(),H=T({setup(){const e=l(m()),n=l(""),f=l(),p=l("month"),r=l(!1),s=l([]),D=()=>{const a={dateTime:m(e.value).format("YYYY-MM-DD"),dateLists:s.value};R(a).then(t=>{C.success(t.message),N.push({name:"Salary"})})},v=a=>s.value.filter(t=>t.day===a.format("YYYY-MM-DD")).length?s.value.filter(t=>t.day===a.format("YYYY-MM-DD"))[0]:"",k=a=>{p.value==="month"&&(f.value=a,s.value.filter(t=>t.day===a.format("YYYY-MM-DD")).length===0?c():$.confirm({title:g("routes.workingDaySetting.calcelText"),okText:g("common.okText"),cancelText:g("common.cancelText"),onOk:()=>{const t=s.value.filter(y=>y.day===a.format("YYYY-MM-DD"))[0].id;W(t).then(y=>{C.success(y.message),u()})}}))},c=()=>{r.value=!0},h=()=>{n.value="",r.value=!1},o=async()=>{r.value=!1,await q({day:m(f.value).format("YYYY-MM-DD"),remark:n.value}),n.value="",await u()},b=(a,t)=>{console.log(a,t),p.value=t,u()},u=()=>{V({day:m(e.value).format("YYYY-MM-DD")}).then(a=>{s.value=a.data.rows})},w=L(()=>s.value.length);return E(()=>{u()}),{t:g,dateTime:e,visible:r,remark:n,selectDates:w,handleCreate:D,getListData:v,handleSelect:k,showModal:c,handleCancel:h,handleSubmit:o,confirm,handlePanelChange:b}}}),z={class:"p-4"},G={class:"pl-2 pr-2"};function A(e,n,f,p,r,s){const D=i("a-button"),v=i("a-badge"),k=i("a-calendar"),c=i("a-textarea"),h=i("a-modal");return I(),P("div",z,[d(D,{type:"primary",onClick:e.handleCreate},{default:Y(()=>[_(S(e.t("routes.workingDaySetting.generateCurrentMonthData"))+" ( "+S(e.selectDates)+" "+S(e.t("routes.workingDaySetting.day"))+" ) ",1)]),_:1},8,["onClick"]),d(k,{value:e.dateTime,"onUpdate:value":n[0]||(n[0]=o=>e.dateTime=o),onSelect:e.handleSelect,onPanelChange:e.handlePanelChange},{dateCellRender:Y(({current:o})=>[j(O("div",G,[d(v,{status:"success",text:e.getListData(o).remark},null,8,["text"])],512),[[x,e.getListData(o)]])]),_:1},8,["value","onSelect","onPanelChange"]),d(h,{visible:e.visible,"onUpdate:visible":n[2]||(n[2]=o=>e.visible=o),title:e.t("routes.workingDaySetting.setDay"),"ok-text":e.t("common.okText"),"cancel-text":e.t("common.cancelText"),onCancel:e.handleCancel,onOk:e.handleSubmit},{default:Y(()=>[d(c,{value:e.remark,"onUpdate:value":n[1]||(n[1]=o=>e.remark=o),placeholder:e.t("routes.workingDaySetting.remark"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["visible","title","ok-text","cancel-text","onCancel","onOk"])])}var X=B(H,[["render",A]]);export{X as default};
